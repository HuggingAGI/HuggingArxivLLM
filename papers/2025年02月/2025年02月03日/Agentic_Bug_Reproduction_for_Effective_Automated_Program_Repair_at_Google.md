# 智能体错误重现：谷歌高效自动化程序修复的关键

发布时间：2025年02月03日

`Agent

理由：这篇论文主要讨论了如何利用基于代理的方法（BRT Agent）来自动生成Bug复现测试（BRTs），并显著提升了生成效率。该方法依赖于微调的大型语言模型（LLM）进行代码编辑，并且与Google的自动程序修复系统集成，展示了其在实际应用中的价值。虽然涉及LLM的应用，但核心在于基于代理的自动化方法，因此归类为Agent更为合适。` `软件开发`

> Agentic Bug Reproduction for Effective Automated Program Repair at Google

# 摘要

> # 摘要
Bug报告往往缺乏足够细节，开发者难以复现和修复缺陷。Bug复现测试（BRTs）——bug存在时失败、修复后通过的测试——对调试至关重要，但在开源和工业环境中，它们很少出现在bug报告中。因此，自动从bug报告生成BRTs有望加速调试并缩短修复时间。本文研究了Google工业环境下的自动化BRT生成，重点关注大规模专有代码库的挑战，并基于Google内部问题跟踪器中的真实工业bug展开研究。我们调整并评估了先进的BRT生成技术LIBRO，提出了基于代理的BRT Agent方法，利用微调的大型语言模型（LLM）进行代码编辑。BRT Agent显著优于LIBRO，在Google内部问题跟踪器的80个人工报告bug中，BRT Agent的合理BRT生成率达到28%，而LIBRO仅为10%。我们进一步将生成的BRT与Google的自动程序修复（APR）系统集成，验证其实际价值。结果显示，提供BRT后，APR系统修复的bug数量增加了30%。此外，我们提出了集成通过率（EPR）指标，利用生成的BRT从APR系统的修复中选择最有希望的修复。EPR在Top-K和基于阈值的修复选择中表现出色，例如，在70%的情况下，EPR基于Top-1排名从20个候选修复中正确选择了合理修复。

> Bug reports often lack sufficient detail for developers to reproduce and fix the underlying defects. Bug Reproduction Tests (BRTs), tests that fail when the bug is present and pass when it has been resolved, are crucial for debugging, but they are rarely included in bug reports, both in open-source and in industrial settings. Thus, automatically generating BRTs from bug reports has the potential to accelerate the debugging process and lower time to repair. This paper investigates automated BRT generation within an industry setting, specifically at Google, focusing on the challenges of a large-scale, proprietary codebase and considering real-world industry bugs extracted from Google's internal issue tracker. We adapt and evaluate a state-of-the-art BRT generation technique, LIBRO, and present our agent-based approach, BRT Agent, which makes use of a fine-tuned Large Language Model (LLM) for code editing. Our BRT Agent significantly outperforms LIBRO, achieving a 28% plausible BRT generation rate, compared to 10% by LIBRO, on 80 human-reported bugs from Google's internal issue tracker. We further investigate the practical value of generated BRTs by integrating them with an Automated Program Repair (APR) system at Google. Our results show that providing BRTs to the APR system results in 30% more bugs with plausible fixes. Additionally, we introduce Ensemble Pass Rate (EPR), a metric which leverages the generated BRTs to select the most promising fixes from all fixes generated by APR system. Our evaluation on EPR for Top-K and threshold-based fix selections demonstrates promising results and trade-offs. For example, EPR correctly selects a plausible fix from a pool of 20 candidates in 70% of cases, based on its top-1 ranking.

[Arxiv](https://arxiv.org/abs/2502.01821)