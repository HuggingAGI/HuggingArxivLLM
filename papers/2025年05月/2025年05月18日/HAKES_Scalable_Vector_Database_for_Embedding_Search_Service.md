# # HAKES：面向嵌入式搜索服务的可扩展向量数据库

发布时间：2025年05月18日

`其他` `数据库` `分布式系统`

> HAKES: Scalable Vector Database for Embedding Search Service

# 摘要

> 现代深度学习模型通过将复杂数据转换为高维嵌入向量来捕获其语义。新兴应用，如检索增强生成，利用嵌入向量空间中的近似最近邻（ANN）搜索来查找相似数据。现有的向量数据库提供了用于高效ANN搜索的索引，其中图索引最受欢迎，因为它们在现实世界高维数据集中的延迟低且召回率高。然而，这些索引在构建时成本高昂，面对高并发读写负载时会遭遇严重争用问题，并且难以扩展到多服务器环境。

    我们的目标是构建一个在高并发读写负载下实现高吞吐量和高召回率的向量数据库。为此，我们首先提出了一种显式的两阶段ANN索引设计，结合快速过滤阶段（使用高度压缩的向量）和确保召回率的精炼阶段，并设计了一种新颖的轻量级机器学习技术来微调索引参数。我们引入了一种早期终止检查，以动态适应每个查询的搜索过程。接下来，我们通过解耦学习参数的管理，在支持写入的同时保持搜索性能。最后，我们设计了HAKES，一个分布式向量数据库，采用分散式架构来支持新索引。我们使用深度学习模型生成的高维嵌入数据集，将我们的索引和系统与12个最先进的索引和三个分布式向量数据库进行了对比评估。实验结果表明，我们的索引在高召回率区域和高并发读写负载下均优于基线索引。此外，
amesys{}具有可扩展性，吞吐量比基线高出【数学公式】倍。HAKES项目已开源，地址为https://www.comp.nus.edu.sg/~dbsystem/hakes/。

> Modern deep learning models capture the semantics of complex data by transforming them into high-dimensional embedding vectors. Emerging applications, such as retrieval-augmented generation, use approximate nearest neighbor (ANN) search in the embedding vector space to find similar data. Existing vector databases provide indexes for efficient ANN searches, with graph-based indexes being the most popular due to their low latency and high recall in real-world high-dimensional datasets. However, these indexes are costly to build, suffer from significant contention under concurrent read-write workloads, and scale poorly to multiple servers.
  Our goal is to build a vector database that achieves high throughput and high recall under concurrent read-write workloads. To this end, we first propose an ANN index with an explicit two-stage design combining a fast filter stage with highly compressed vectors and a refine stage to ensure recall, and we devise a novel lightweight machine learning technique to fine-tune the index parameters. We introduce an early termination check to dynamically adapt the search process for each query. Next, we add support for writes while maintaining search performance by decoupling the management of the learned parameters. Finally, we design HAKES, a distributed vector database that serves the new index in a disaggregated architecture. We evaluate our index and system against 12 state-of-the-art indexes and three distributed vector databases, using high-dimensional embedding datasets generated by deep learning models. The experimental results show that our index outperforms index baselines in the high recall region and under concurrent read-write workloads. Furthermore, \namesys{} is scalable and achieves up to $16\times$ higher throughputs than the baselines. The HAKES project is open-sourced at https://www.comp.nus.edu.sg/~dbsystem/hakes/.

[Arxiv](https://arxiv.org/abs/2505.12524)