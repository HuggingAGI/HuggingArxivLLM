# 基于实证的自动提示检查与修复工具：开发者提示中的偏见、漏洞与优化案例研究

发布时间：2025年01月21日

`LLM应用

**理由**：这篇论文主要讨论了如何通过工具（PromptDoctor）来检测和纠正开发者提示（Dev Prompts）中的问题，如偏见、漏洞和性能不佳等。这些提示是与大型语言模型（LLMs）交互的关键部分，用于执行各种任务。因此，这篇论文属于**LLM应用**的范畴，因为它关注的是如何在实际应用中使用和优化LLMs的提示。` `软件开发`

> An Empirically-grounded tool for Automatic Prompt Linting and Repair: A Case Study on Bias, Vulnerability, and Optimization in Developer Prompts

# 摘要

> 大型语言模型（LLMs）的迅猛发展浪潮已推动其迅速融入应用级逻辑。许多软件系统现通过提示与这些黑箱模型交互，结合自然语言与运行时动态值，执行从情感分析到问答的多样化任务。鉴于这些提示的程序化和结构化自然语言特性，我们称之为开发者提示（Dev Prompts）。与传统软件工件不同，Dev Prompts 融合了自然语言指令与编程和标记语言等人工语言，因此需要专门的分析工具，与经典软件评估方法不同。
    为应对这一需求，我们推出了 PromptDoctor，一款专为检测和纠正 Dev Prompts 问题而设计的工具。PromptDoctor 识别并解决与偏见、漏洞和性能不佳相关的 Dev Prompts 问题，帮助减轻其潜在危害。在我们对 2,173 个 Dev Prompts 的分析中，这些提示是从 40,573 个 Dev Prompts 中选出的代表性样本，我们发现 3.46% 的提示存在一种或多种形式的偏见，10.75% 的提示易受提示注入攻击。此外，3,310 个提示适合自动优化。为解决这些问题，我们将 PromptDoctor 应用于发现的缺陷 Dev Prompts。PromptDoctor 对 68.29% 的有偏见 Dev Prompts 进行了去偏见处理，加固了 41.81% 的易受攻击 Dev Prompts，并提升了 37.1% 的性能不佳 Dev Prompts 的性能。最后，我们开发了 PromptDoctor VSCode 扩展，使开发者能够轻松地在现有开发工作流程中增强 Dev Prompts。本工作的数据和源代码可在以下网址获取：

> The tidal wave of advancements in Large Language Models (LLMs) has led to their swift integration into application-level logic. Many software systems now use prompts to interact with these black-box models, combining natural language with dynamic values interpolated at runtime, to perform tasks ranging from sentiment analysis to question answering. Due to the programmatic and structured natural language aspects of these prompts, we refer to them as Developer Prompts. Unlike traditional software artifacts, Dev Prompts blend natural language instructions with artificial languages such as programming and markup languages, thus requiring specialized tools for analysis, distinct from classical software evaluation methods.
  In response to this need, we introduce PromptDoctor, a tool explicitly designed to detect and correct issues of Dev Prompts. PromptDoctor identifies and addresses problems related to bias, vulnerability, and sub-optimal performance in Dev Prompts, helping mitigate their possible harms. In our analysis of 2,173 Dev Prompts, selected as a representative sample of 40,573 Dev Prompts, we found that 3.46% contained one or more forms of bias, 10.75% were vulnerable to prompt injection attacks. Additionally, 3,310 were amenable to automated prompt optimization. To address these issues, we applied PromptDoctor to the flawed Dev Prompts we discovered. PromptDoctor de-biased 68.29% of the biased Dev Prompts, hardened 41.81% of the vulnerable Dev Prompts, and improved the performance of 37.1% sub-optimal Dev Prompts. Finally, we developed a PromptDoctor VSCode extension, enabling developers to easily enhance Dev Prompts in their existing development workflows. The data and source code for this work are available at

[Arxiv](https://arxiv.org/abs/2501.12521)