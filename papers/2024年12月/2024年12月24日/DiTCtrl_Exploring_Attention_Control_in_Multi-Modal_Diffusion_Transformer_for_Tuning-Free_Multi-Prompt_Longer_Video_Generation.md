# DiTCtrl：探索多模态扩散变压器中的注意力控制，用于实现无需调优的多提示长视频生成

发布时间：2024年12月24日

`LLM应用` `视频生成` `多模态`

> DiTCtrl: Exploring Attention Control in Multi-Modal Diffusion Transformer for Tuning-Free Multi-Prompt Longer Video Generation

# 摘要

> Sora 类视频生成模型凭借多模态扩散 Transformer（MM-DiT）架构取得了显著成就。然而，当下的视频生成模型大多聚焦于单提示，难以通过多个连续提示生成更能反映现实世界动态场景的连贯画面。尽管一些开创性工作已涉足多提示视频生成领域，但它们面临诸多严峻挑战，如严格的训练数据要求、弱提示跟随以及不自然的过渡。为应对这些难题，我们首次推出了 DiTCtrl，这是一种基于 MM-DiT 架构且无需训练的多提示视频生成方法。我们的核心思路是将多提示视频生成任务视作具有平滑过渡的时间视频编辑。为达成此目标，我们率先剖析了 MM-DiT 的注意力机制，发现 3D 全注意力的表现与类 UNet 扩散模型中的交叉/自注意力块相似，能够借助注意力共享实现跨不同提示的掩码引导精准语义控制，以用于多提示视频生成。基于我们的精心设计，DiTCtrl 生成的视频在给定多个连续提示时，能够实现平滑过渡和一致的对象运动，且无需额外训练。此外，我们还推出了 MPVBench，这是专门为多提示视频生成设计的新基准，用于评估多提示生成的性能。大量实验表明，我们的方法在无需额外训练的情况下达到了业界领先水平。

> Sora-like video generation models have achieved remarkable progress with a Multi-Modal Diffusion Transformer MM-DiT architecture. However, the current video generation models predominantly focus on single-prompt, struggling to generate coherent scenes with multiple sequential prompts that better reflect real-world dynamic scenarios. While some pioneering works have explored multi-prompt video generation, they face significant challenges including strict training data requirements, weak prompt following, and unnatural transitions. To address these problems, we propose DiTCtrl, a training-free multi-prompt video generation method under MM-DiT architectures for the first time. Our key idea is to take the multi-prompt video generation task as temporal video editing with smooth transitions. To achieve this goal, we first analyze MM-DiT's attention mechanism, finding that the 3D full attention behaves similarly to that of the cross/self-attention blocks in the UNet-like diffusion models, enabling mask-guided precise semantic control across different prompts with attention sharing for multi-prompt video generation. Based on our careful design, the video generated by DiTCtrl achieves smooth transitions and consistent object motion given multiple sequential prompts without additional training. Besides, we also present MPVBench, a new benchmark specially designed for multi-prompt video generation to evaluate the performance of multi-prompt generation. Extensive experiments demonstrate that our method achieves state-of-the-art performance without additional training.

[Arxiv](https://arxiv.org/abs/2412.18597)