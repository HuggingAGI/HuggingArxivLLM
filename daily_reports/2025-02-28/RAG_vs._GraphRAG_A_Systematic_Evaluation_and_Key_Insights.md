# RAG vs. GraphRAG：从文本到图，谁才是AI问答的终极答案？
发布时间：2025年02月16日

`RAG`
> RAG vs. GraphRAG: A Systematic Evaluation and Key Insights
>
> 检索增强生成（RAG）通过从外部来源检索相关信息，显著提升了大型语言模型（LLMs）在各类任务中的表现，尤其在文本数据领域。对于结构化数据，如知识图谱，GraphRAG已被广泛用于高效检索相关信息。然而，最新研究表明，将文本中的隐性知识转化为图结构，能够为特定任务带来显著优势，从而将GraphRAG的应用范围从图数据扩展至通用文本数据。尽管这些方法已成功扩展，但目前针对文本数据的GraphRAG应用大多局限于特定任务和数据集，缺乏在广泛使用的文本基准上对RAG与GraphRAG进行系统性评估和比较。本研究系统评估了RAG与GraphRAG在问答和基于查询的摘要等成熟基准任务中的表现，揭示了两者在不同任务与评估维度下的独特优势。基于这些发现，我们深入探讨了融合两者优势以提升下游任务性能的策略。此外，本文还深入剖析了现有GraphRAG方法的局限性，并为未来研究指明了方向。
>
> https://arxiv.org/abs/2502.11371

![](https://raw.githubusercontent.com/HuggingAGI/wx_assets/main/2025/02/12/1739367812022-81912e8f-5f91-4b9d-b4b2-52b0e322d137.png)
**添加请注明[]**
**如遇无法添加，请+ vx: iamxxn886**
<hr />



## 一、为什么需要RAG和GraphRAG技术？

### 1.1 大模型的局限性

大型语言模型（LLMs, Large Language Models）虽然在生成文本方面表现出色，但它们存在一些固有缺陷。比如，LLMs容易出现“幻觉”现象，即生成不准确或虚构的内容。此外，LLMs的上下文窗口有限，无法处理过长的文本，还存在隐私泄露的风险。为了弥补这些不足，检索增强生成（RAG, Retrieval-Augmented Generation）技术应运而生。RAG通过从外部数据源检索相关信息，显著提升了模型的准确性和鲁棒性。例如，在医疗领域，RAG可以帮助医生快速检索最新的医学文献，从而提高诊断的准确性。

### 1.2 结构化数据的挑战

尽管RAG在文本数据上表现优异，但对于结构化数据（如知识图谱），传统的RAG方法显得力不从心。知识图谱（KGs, Knowledge Graphs）等图结构数据蕴含丰富的关联信息，而GraphRAG则专门用于从图数据中检索信息。然而，随着研究的深入，人们发现将文本数据转化为图结构后，GraphRAG在文本任务中也能发挥重要作用。例如，在社交网络分析中，GraphRAG可以通过分析用户之间的关系，帮助识别潜在的社交圈层。

### 1.3 RAG与GraphRAG的互补性

RAG和GraphRAG各有优劣：RAG擅长处理单跳问题和细节信息，而GraphRAG在多跳问题和推理任务中表现更佳。为了充分发挥两者的优势，我们需要系统地评估和比较它们在广泛文本任务中的表现，并探索如何将它们结合起来以提升整体性能。例如，在法律领域，RAG可以用于检索具体的法律条文，而GraphRAG则可以帮助律师分析案件之间的关联性，从而提供更全面的法律建议。




## 2.1 RAG：文本检索的利器

RAG（Retrieval-Augmented Generation，检索增强生成）的核心思想是将文本分割成小块（chunks），并通过语义搜索或词法搜索从外部数据源中检索相关信息。具体来说，RAG会将查询和文本块映射到同一个特征空间，计算它们的相似度，从而找到最相关的文本块。这种方法特别适合处理单跳问题和需要详细信息的任务。

举个例子，假设你正在使用一个问答系统，询问“谁发明了电话？”RAG会从大量的文本数据中检索出与“电话”和“发明”相关的文本块，然后生成一个准确的答案：“亚历山大·格拉汉姆·贝尔”。这种检索方式不仅提高了答案的准确性，还能有效减少大语言模型（LLMs）的“幻觉”问题，即生成不准确或虚构的信息。

RAG的实现通常依赖于语义相似性计算。比如，使用OpenAI的text-embedding-ada-002模型将文本块和查询映射到同一个向量空间，然后通过计算余弦相似度来找到最相关的文本块。这种方法在处理单跳问题时表现尤为出色，因为它能够直接从文本中提取出所需的具体信息。

## 2.2 GraphRAG：图结构的智慧

GraphRAG则专注于从图结构数据中检索信息。它首先将文本转化为知识图谱（Knowledge Graph, KG），然后通过遍历图中的节点和边来获取相关信息。GraphRAG有两种主要方法：

- **基于知识图谱的GraphRAG**：从文本中提取三元组（实体、关系、实体），并通过多跳邻居检索信息。例如，如果你询问“爱因斯坦的导师是谁？”，GraphRAG会从知识图谱中找到“爱因斯坦”这个节点，然后通过“导师”关系找到“赫尔曼·闵可夫斯基”这个实体。

- **基于社区的GraphRAG**：在知识图谱的基础上构建层次化社区，并从社区中检索信息。这种方法特别适合处理多跳问题和需要全局视角的任务。例如，在处理“爱因斯坦的导师的导师是谁？”这样的多跳问题时，基于社区的GraphRAG能够通过社区的层次结构，逐步检索出“爱因斯坦”的导师的导师：“卡尔·弗里德里希·高斯”。

GraphRAG的优势在于它能够捕捉到文本中的复杂关系，特别适合处理需要多步推理的任务。比如，在处理“爱因斯坦的导师的导师是谁？”这样的问题时，RAG可能会因为信息分散在多个文本块中而表现不佳，而GraphRAG则能够通过图结构的关系链，准确地找到答案。

## 2.3 开源实现

- **RAG**：可以使用LlamaIndex等开源工具实现。LlamaIndex是一个高效的检索增强生成工具，支持将文本分割成块并进行语义搜索，特别适合处理单跳问题和需要详细信息的任务。

- **GraphRAG**：微软的GraphRAG项目提供了基于社区的GraphRAG实现。该项目通过构建层次化社区，能够有效地处理多跳问题和需要全局视角的任务，特别适合在复杂推理任务中应用。

通过结合RAG和GraphRAG的优势，我们可以在不同的任务中实现更高效的检索和生成。例如，在处理单跳问题时使用RAG，而在处理多跳问题时使用GraphRAG，从而在问答、摘要生成等任务中取得更好的效果。




## 三、RAG和GraphRAG的应用效果评估

### 3.1 问答任务的表现

在问答任务中，RAG（Retrieval-Augmented Generation，检索增强生成）和GraphRAG（图检索增强生成）展现了明显的互补性。RAG在处理单跳问题和细节信息任务时表现优异。例如，在Natural Questions（NQ）数据集上，RAG的准确率显著高于GraphRAG。这是因为RAG通过语义搜索直接从文本中检索相关信息，适合回答直接且具体的问题。

相比之下，GraphRAG在多跳问题和推理任务中表现更佳。例如，在HotPotQA数据集上，基于社区的GraphRAG（Local）的F1得分比RAG高出5%。这是因为GraphRAG利用图结构捕捉实体之间的关系，能够更好地处理需要跨多个文档或实体进行推理的复杂问题。

**应用案例**：假设你需要回答“爱因斯坦的相对论是如何影响现代物理学的？”这种问题，RAG可能直接从相关文档中找到具体信息，而GraphRAG则可以通过分析“爱因斯坦”和“现代物理学”之间的关系，生成更全面的答案。

### 3.2 查询摘要任务的表现

在查询摘要任务中，RAG和GraphRAG的表现因任务类型而异。RAG在多文档摘要任务中表现最佳，能够捕捉到更多的细节信息。例如，在ODSum-story数据集上，RAG生成的摘要更接近真实答案，因为它直接从多个文档中提取关键信息。

GraphRAG则在全局摘要任务中表现更佳，能够生成更多样化和多角度的摘要。例如，在QMSum数据集上，GraphRAG通过分析文档的全局结构，生成更全面的摘要，适合需要整体视角的任务。

**应用案例**：如果你需要总结一篇关于“气候变化”的多篇研究报告，RAG可以提取每篇报告的具体数据，而GraphRAG则可以从整体上分析这些报告之间的关系，生成更宏观的摘要。

### 3.3 性能提升策略

为了结合RAG和GraphRAG的优势，研究者提出了两种策略：选择策略和集成策略。选择策略根据查询的特性动态选择RAG或GraphRAG。例如，事实类查询使用RAG，推理类查询使用GraphRAG。集成策略则同时使用RAG和GraphRAG检索信息，并将结果合并生成最终答案。集成策略在大多数任务中表现更佳，但计算成本较高。

**应用案例**：在回答“苹果公司是如何从一家小公司发展成为全球科技巨头的？”这种问题时，选择策略可能会根据问题的复杂性自动选择GraphRAG，而集成策略则会同时使用RAG和GraphRAG，生成更全面的答案。

### 3.4 评估挑战

在摘要任务中，使用LLM（Large Language Model，大语言模型）作为评估工具（LLM-as-a-Judge）存在位置偏差问题。例如，改变RAG和GraphRAG摘要的顺序会显著影响评估结果。因此，未来的研究需要开发更可靠的评估方法。

**应用案例**：在评估两篇关于“人工智能未来发展趋势”的摘要时，LLM可能会因为摘要的顺序不同而给出不同的评分，这表明当前的评估方法需要进一步改进。




## 四、总结与展望

在文本任务中，RAG（Retrieval-Augmented Generation，检索增强生成）和GraphRAG（基于图的检索增强生成）各自展现了独特的优势。RAG通过从外部文本数据库中检索相关信息，能够有效增强大语言模型（LLMs）的性能，特别是在需要详细信息的单跳问题和细粒度总结任务中表现出色。而GraphRAG则通过将文本中的隐含知识转化为图结构，在多跳问题和全局总结任务中展现了更强的推理能力。这两种方法的互补性为提升AI性能提供了新的思路。

### 技术点与应用案例
1. **RAG的优势**：在单跳问题回答任务中，RAG能够直接从文本中检索到详细的信息。例如，在自然问题（NQ）数据集中，RAG通过语义搜索找到与问题直接相关的文本片段，从而生成准确的答案。
2. **GraphRAG的优势**：在多跳问题回答任务中，GraphRAG通过图的遍历和社区检测算法，能够从多个相关节点中提取信息。例如，在HotPotQA数据集中，GraphRAG通过分析实体之间的关系链，成功回答了需要跨多个文档推理的问题。

### 未来研究方向
1. **更高效的图构建方法**：当前的GraphRAG依赖于大语言模型（LLMs）进行图构建，这可能导致图结构的不完整性。未来的研究可以探索更高效的图构建方法，例如结合预训练的图神经网络（Graph Neural Networks, GNNs）来增强图的完整性和准确性。
2. **RAG与GraphRAG的结合**：通过动态选择或集成RAG和GraphRAG的优势，可以进一步提升任务的性能。例如，在问题回答任务中，可以根据问题的类型（单跳或多跳）动态选择使用RAG或GraphRAG，或者将两者的检索结果进行集成，生成更全面的答案。

### 技术展望
随着技术的不断发展，RAG和GraphRAG有望在更多领域发挥重要作用。例如，在医疗领域，RAG可以通过检索医学文献生成准确的诊断建议，而GraphRAG则可以通过分析患者的病历图结构，提供更全面的治疗方案。在教育领域，RAG可以帮助学生快速找到学习资料，而GraphRAG则可以通过分析知识点之间的关系，生成个性化的学习路径。

总之，RAG和GraphRAG的互补性为AI技术的发展提供了新的可能性。未来的研究可以通过优化图构建方法和探索更高效的集成策略，进一步推动AI技术在各个领域的应用和突破。



<hr />

- 论文原文: [https://arxiv.org/abs/2502.11371](https://arxiv.org/abs/2502.11371)
- 获取更多最新Arxiv论文更新: [https://github.com/HuggingAGI/HuggingArxiv](https://github.com/HuggingAGI/HuggingArxiv)!
- 加入社群，+v: iamxxn886
- 点击公众号菜单加入讨论
![](https://raw.githubusercontent.com/HuggingAGI/wx_assets/main/2024/07/31/1722434818326-94339e92-22f1-4472-9d27-fed232f70b5d.jpeg)