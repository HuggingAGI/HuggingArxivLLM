# 金融信息搜索的革命：FinSearch如何用大语言模型（LLMs）实现15.93%的准确率提升？
发布时间：2024年12月14日

`智能金融`
> An Agent Framework for Real-Time Financial Information Searching with Large Language Models
>
> 金融决策需要处理海量实时信息，同时理解这些信息之间复杂的时间关系。传统搜索引擎在实时信息获取方面表现出色，但往往难以理解复杂的用户意图和上下文细微差别。相比之下，大型语言模型（LLMs）展现了强大的推理和交互能力，但在缺乏实时数据的情况下可能生成不可靠的结果。尽管近期已有尝试将LLMs与搜索功能结合，但它们仍面临以下挑战：（1）受限于专业金融数据的访问；（2）静态查询结构无法适应动态市场环境；（3）生成结果时缺乏足够的时间感知能力。

为了解决这些问题，我们提出了FinSearch——一个专为金融应用设计的基于智能体的搜索框架，能够接入包括市场、股票和新闻在内的多种金融数据源。创新性地，FinSearch由四个核心组件构成：（1）基于LLM的多步骤搜索预规划器，通过图表示将用户查询分解为结构化的子查询，并映射到特定数据源；（2）搜索执行器，配备基于LLM的自适应查询重写器，在执行每个子查询的同时，根据中间搜索结果动态优化后续节点的子查询；（3）时间加权机制，基于从用户查询中推断出的时间上下文，优先处理相关信息；（4）基于LLM的结果生成器，将搜索结果整合成连贯且上下文相关的输出。

为了评估FinSearch的表现，我们构建了FinSearchBench-24，一个涵盖股票市场、利率变动、货币政策和行业发展等领域的基准测试集，包含1500个四选一问题，时间范围从2024年6月至10月。
>
> https://arxiv.org/abs/2502.15684

![](https://raw.githubusercontent.com/HuggingAGI/wx_assets/main/2025/02/12/1739367812022-81912e8f-5f91-4b9d-b4b2-52b0e322d137.png)
**添加请注明[]**
**如遇无法添加，请+ vx: iamxxn886**
<hr />



## 一、为什么需要FinSearch技术？

### 1.1 从传统搜索引擎到FinSearch的代际跃迁

在过去的十年中，传统搜索引擎（如Google、Bing）在提供实时信息访问方面表现出色，但在处理复杂的用户意图和上下文关系时却显得力不从心，尤其是在金融领域。例如，当用户需要分析某公司的股票表现时，传统搜索引擎无法提供实时的市场数据和财务报告，导致信息获取的局限性。

2020年代初，大语言模型（LLMs，Large Language Models）如GPT和Llama的崛起，展示了强大的推理和交互能力。然而，由于LLMs依赖于静态的训练数据，无法访问实时信息，生成的输出可能不可靠。例如，当用户查询当前市场状况时，LLMs可能会生成过时或不准确的分析。

2023年，MindSearch首次尝试将LLMs与搜索能力结合，但仍存在三大局限：无法访问专业金融数据、静态查询结构、缺乏时间敏感性。例如，MindSearch在处理金融查询时，无法动态调整查询策略，导致搜索结果无法适应市场的快速变化。

2024年，FinSearch通过动态查询重写、时间加权机制和多步搜索预规划，解决了上述问题，成为金融信息搜索的里程碑。例如，FinSearch能够根据中间搜索结果实时优化后续查询，确保搜索过程始终响应最新的市场信息。

### 1.2 FinSearch解决的三大行业难题

**难题1：专业金融数据访问受限**  
**案例**：某投资者需要分析某公司的股票表现，但传统搜索引擎无法提供实时市场数据和财务报告。  
**FinSearch的解决方案**：通过集成Yahoo Finance API、NewsAPI等专业数据源，FinSearch能够精准获取实时金融信息。例如，FinSearch可以直接从Yahoo Finance API获取最新的股票价格和财务报告，确保投资者能够及时做出决策。

**难题2：静态查询结构无法适应动态市场**  
**案例**：某分析师在查询过程中发现新的市场信息，但传统搜索引擎无法动态调整查询策略。  
**FinSearch的解决方案**：通过动态查询重写器，FinSearch能够根据中间搜索结果实时优化后续查询。例如，当分析师发现某公司的股票价格出现异常波动时，FinSearch会自动调整查询策略，优先获取与该波动相关的新闻和分析报告。

**难题3：搜索结果缺乏时间敏感性**  
**案例**：某投资者需要了解近期货币政策变化，但传统搜索引擎无法优先展示最新信息。  
**FinSearch的解决方案**：通过时间加权机制，FinSearch能够根据查询的时间上下文优先展示最相关的信息。例如，当投资者查询“最近一周的货币政策变化”时，FinSearch会优先展示最近一周内的政策公告，而不是几个月前的旧信息。

通过解决这三大难题，FinSearch不仅提升了金融信息搜索的准确性和时效性，还为投资者和分析师提供了更加智能化的决策支持工具。




## 二、FinSearch的核心技术原理是什么？

FinSearch是一个专门为金融信息检索设计的智能搜索框架，它结合了大型语言模型（LLMs, Large Language Models）和实时数据源，能够高效处理复杂的金融查询。其核心技术包括多步搜索预规划器、动态查询重写器、时间加权机制和响应生成器。这些组件共同协作，确保用户能够获得准确、及时且上下文相关的金融信息。

### 2.1 多步搜索预规划器

FinSearch的核心是一个基于LLM的多步搜索预规划器，它能够将用户的复杂查询分解为结构化的子查询，并通过图表示法将每个子查询映射到特定的数据源。想象一下，你在规划一次旅行，预规划器就像一个智能导游，将你的旅行计划分解为多个小任务（如订机票、订酒店、规划行程），并为每个任务选择最合适的资源。

具体来说，预规划器首先通过语义解析提取用户查询中的关键元素，如时间指示、公司实体和金融事件。接着，它将复杂的金融查询分解为多个子查询，例如分析公司业绩时，可能会生成查询历史股价、近期财报、市场情绪和行业趋势的子查询。每个子查询都会被映射到特定的金融数据源，如新闻API、搜索API和金融API。最终，预规划器构建一个搜索图，图中的每个节点代表一个子查询，节点之间的边表示逻辑依赖关系。

### 2.2 动态查询重写器

在搜索执行过程中，FinSearch通过动态查询重写器不断优化后续查询。这就像你在解谜游戏时，每解开一个线索，就会根据新线索调整下一步的策略。搜索执行器在遍历搜索图时，会根据中间搜索结果动态调整后续子查询。例如，如果某个子查询的结果表明市场情绪发生了显著变化，重写器可能会调整下一个子查询，以更深入地分析这一变化。

动态查询重写器的核心是一个基于LLM的模型，它能够根据当前查询的结果和搜索图的状态，生成更优化的子查询。这种动态调整机制使得FinSearch能够灵活应对金融市场的快速变化，确保搜索结果始终与用户需求保持一致。

### 2.3 时间加权机制

FinSearch通过时间加权机制，根据用户查询的时间上下文优先展示最相关的信息。这就像你在看新闻时，最新的头条新闻总是被放在最显眼的位置。在金融领域，信息的时效性至关重要，因此FinSearch为每个子查询的结果分配一个时间权重，权重的大小取决于信息的时间戳与查询时间戳的接近程度。

具体来说，时间加权机制使用一个时间衰减函数来计算每个节点的权重。例如，信息的时间戳与查询时间戳相差在72小时内的节点会获得较高的权重，而超过72小时的信息则会被忽略。这种机制确保了FinSearch在生成最终结果时，能够优先展示最新且最相关的金融信息。

### 2.4 响应生成器

最后，响应生成器将搜索结果整合为连贯的、上下文相关的输出，并结合可视化元素（如K线图）呈现给用户。这就像你在阅读一份综合报告，文字分析和图表相辅相成，帮助你全面理解信息。响应生成器首先会聚合所有节点的搜索结果，并根据时间权重对信息进行排序和去重。接着，它会生成一份结构化的分析报告，报告中包含详细的文字分析和可视化图表。

例如，当用户查询某只股票的表现时，响应生成器可能会生成一段文字分析，描述该股票的历史表现、近期波动和市场情绪，同时附上一张K线图，展示该股票的价格走势。这种结合文字和图表的输出方式，能够帮助用户更直观地理解复杂的金融信息。

通过以上四个核心组件的协作，FinSearch能够高效处理复杂的金融查询，为用户提供准确、及时且易于理解的金融信息。这种设计不仅提升了搜索的准确性，还大大提高了用户的使用体验。




## 三、FinSearch的实际效果如何？

### 3.1 准确率提升
在FinSearch Bench-24基准测试中，FinSearch的表现显著优于现有方法。例如，与GPT-4o相比，FinSearch的准确率提升了15.93%；与Llama3.1-405B相比，准确率提升了14.06%；而与Claude3.5-Sonnet相比，准确率更是提升了21.6%。这些数据表明，FinSearch在处理复杂金融查询时具有显著优势。

### 3.2 算力成本与效率
尽管FinSearch的算力成本有所增加，但其处理时间仍保持在合理范围内。平均处理时间为14.55至29.31秒/答案。相比之下，Perplexity Pro的处理时间虽然更短（3.94至6.12秒），但其准确率显著低于FinSearch。这意味着FinSearch在保证高准确率的同时，仍能维持较高的计算效率。

### 3.3 组件贡献分析
FinSearch的两个核心组件——时间加权机制和动态查询重写器，各自对系统性能的提升都有显著贡献。单独使用时，时间加权机制使准确率提升了14.20%，而动态查询重写器则提升了3.66%。当两者结合使用时，准确率提升了17.47%，展现出显著的协同效应。这表明，这两个组件在提升系统性能方面具有互补性。




## 四、总结

FinSearch通过创新的多步搜索预规划、动态查询重写和时间加权机制，成功解决了金融信息搜索中的三大难题：复杂用户意图理解、动态市场条件适应以及时间敏感性处理。这些创新显著提升了搜索的准确率和实时性，使其在金融分析领域脱颖而出。

### 多步搜索预规划
FinSearch的多步搜索预规划模块利用大语言模型（LLM, Large Language Model）将复杂的金融查询分解为结构化的子查询，并通过图表示映射到特定的数据源。例如，当用户查询某公司股票表现时，系统会自动生成多个子查询，分别获取历史股价、最新财报、市场情绪和行业趋势等信息。这种分解方式不仅提高了搜索的精准度，还能覆盖更广泛的金融数据源。

### 动态查询重写
动态查询重写机制是FinSearch的另一大亮点。在搜索过程中，系统会根据中间结果动态调整后续查询。例如，如果某个子查询返回的信息显示某公司近期发布了重大利好消息，系统会自动调整后续查询，重点关注相关市场反应。这种机制使得FinSearch能够灵活应对金融市场的快速变化，确保搜索结果始终与最新市场动态保持一致。

### 时间加权机制
时间加权机制则是FinSearch在时间敏感性处理上的创新。系统会根据用户查询的时间上下文，为不同时间点的信息分配权重。例如，对于近期发布的财务数据，系统会赋予更高的权重，而对于超过72小时的信息，则会降低其重要性。这种机制确保了搜索结果不仅准确，还能反映信息的时间价值，特别适合金融分析中对实时性的高要求。

尽管FinSearch在算力成本上有所增加，但其在金融分析中的精准性和实时性使其成为行业标杆。未来，FinSearch有望进一步扩展其数据源和分析能力，例如整合更多类型的金融数据（如宏观经济指标、行业报告等），并优化时间加权机制以支持更长的时间跨度分析。这将为金融决策提供更强大的支持，帮助用户更好地把握市场动态和投资机会。

总的来说，FinSearch通过结合大语言模型的强大理解能力和金融领域的专业需求，为金融信息搜索树立了新的标准。其创新设计不仅提升了搜索效率，还为金融分析提供了更全面、更实时的数据支持，展现了AI技术在金融领域的巨大潜力。



<hr />

- 论文原文: [https://arxiv.org/abs/2502.15684](https://arxiv.org/abs/2502.15684)
- 获取更多最新Arxiv论文更新: [https://github.com/HuggingAGI/HuggingArxiv](https://github.com/HuggingAGI/HuggingArxiv)!
- 加入社群，+v: iamxxn886
- 点击公众号菜单加入讨论
![](https://raw.githubusercontent.com/HuggingAGI/wx_assets/main/2024/07/31/1722434818326-94339e92-22f1-4472-9d27-fed232f70b5d.jpeg)